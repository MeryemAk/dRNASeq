/******************************************************************************/
/* Define parameters
/******************************************************************************/

params {
    help = false
    monochrome_logs = false   
    in_dir = ""
    out_dir = ""
    barcodes = ""
    qc = true
    nano_hq = true
    gsize = ""
    asm_coverage = ""
    meta = false
    mapping = true
    polishing = true
    model = ""
    fast_annotation = true
    accurate_annotation = true
    pgap_path = "/mnt/drive3/tools/pgap/2024-07-18"
    pgap_version = "2024-07-18.build7555"
    organism = ""
    ignore_errors = false
    assembly_qc = true
    lineage = "bacteria_odb10"
    busco_path = "/data/databases/busco"
    t_qc = 4
    t_assembly = 4
    t_polishing = 4
    t_fast_annotation = 4
    t_accurate_annotation = 4
    t_mapping = 4
    t_assembly_qc = 4
}

docker.enabled = true

process {

    withLabel: qc{
        container = "nanopack:v1"
        cpus = params.t_qc
    }
    withLabel: flye{
        container = "staphb/flye:2.9.4"
        cpus = params.t_assembly
    }
    withLabel: mapping{
        container = "staphb/minimap2:2.28"
        cpus = params.t_mapping
    }
    withLabel: samtools{
        container = "staphb/samtools:1.21"
        cpus = params.t_mapping
    }
    withLabel: medaka{
        container = "staphb/medaka:2.0.0"
        cpus = params.t_polishing
    }
    withLabel: prokka{
        container = "staphb/prokka:1.14.5"
        cpus = params.t_fast_annotation
    }
    withLabel: busco{
        container = "ezlabgva/busco:v5.8.0_cv1"
        cpus = params.t_assembly_qc
    }
    withLabel: report{
        container = "bikc/report:1.1"
    }
}


executor {
    name = 'local'
    queueSize = 5
    memory = '64 GB'
    cpus = 32
}


timeline {
  enabled = true
  file = "${params.out_dir}/timeline.html"
}
report {
  enabled = true
  file = "${params.out_dir}/report.html"
}
