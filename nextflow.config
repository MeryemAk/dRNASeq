/******************************************************************************/
/* Define parameters
/******************************************************************************/

params {
    in_dir = ""
    out_dir = ""
    barcodes = ""
    ignore_errors = false
    help = false
    monochrome_logs = false 

    qc = true
    t_qc = 4

    trimming = false
    t_trimming = 4

    t_mapping = 4
    human_ref= "${HOME}/dRNASeq/reference_genomes/human_ref"
    candida_ref= "${HOME}/dRNASeq/reference_genomes/candida_ref"
    bacteria_index= "${HOME}/dRNASeq/reference_genomes/bacteria_index"

    t_counting = 4
    human_annotation = "${HOME}/dRNASeq/reference_genomes/human_annotation.gtf"
    candida_annotation = "${HOME}/dRNASeq/reference_genomes/candida_annotation.gtf"
    bacteria_annotation = "${HOME}/dRNASeq/reference_genomes/bacteria_annotation.gtf"    
}

docker.enabled = true

process {
    withLabel: 'qc'{
        container = "nanopack:v1"
        cpus = params.t_qc
    }
    withLabel: 'trimming'{
        container = "mcfonsecalab/pychopper"
        cpus = params.t_trimming
    }
    withLabel: 'mapping'{
        container = "staphb/minimap2:2.28"
        cpus = params.t_mapping
    }
    withLabel: 'samtools'{
        container = "staphb/samtools:1.21"
        cpus = params.t_mapping
    }
    withLabel: 'report'{
        container = "bikc/report:1.1"
    }
    withLabel: 'counting'{
        container = "pegi3s/feature-counts:2.0.0"
    }
}

executor {
    name = 'local'
    queueSize = 5
    memory = '64 GB'
    cpus = 32
}

timeline {
  enabled = true
  file = "${params.out_dir}/timeline.html"
}
report {
  enabled = true
  file = "${params.out_dir}/report.html"
}
