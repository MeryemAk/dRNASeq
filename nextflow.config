/******************************************************************************/
/* Define parameters
/******************************************************************************/

params {
    help = false
    monochrome_logs = false   
    in_dir = ""
    out_dir = ""
    basecalling = false
    bc_config = "dna_r9.4.1_450bps_fast.cfg"
    num_callers = 1
    barcode_kits = "EXP-NBD196"
    skip_qc = false
    merged = false
    nanoplot = true
    nanocomp = true
    barcodes = ""
    miniasm_assembly = false
    flye_assembly = true
    nano_hq = true
    gsize = ""
    asm_coverage = ""
    plasmids = false
    meta = true
    mapping = true
    annotation = true
    mapping = true
    polishing = true
    model = "r941_min_hac_g507"
    busco = true
    lineage = "streptomycetales_odb10"
    busco_path = "/home/marieke/analyses/sbo/22R010/assembly/busco_downloads"
    t_qc = 4
    t_assembly = 4
    t_polishing = 4
    t_annotation = 4
    t_mapping = 4
    t_statistics = 4
}

docker.enabled = true

process {
    /* if an account on Oxford Nanopore is made, the Docker image can be provided here. Don't forget to uncomment this lines then */
    withName:guppy {
        container = 'genomicpariscentre/guppy:4.4.2'
    }
    withLabel: merge {
        container = "bikc/alpine:3.14.2"
    }
    withLabel: no_merge {
        container = "bikc/alpine:3.14.2"
    }
    withLabel: nanoplot{
        container = "staphb/nanoplot:1.33.0"
        cpus = params.t_qc
    }
    withLabel: nanocomp{
        container = "bikc/nanocomp:1.15.1"
        cpus = params.t_qc
    }
    withLabel: flye{
        container = "staphb/flye:2.9"
        cpus = params.t_assembly
    }
    withLabel: miniasm{
        container = "bikc/miniasm:0.3"
        cpus = params.t_assembly
    }
    withLabel: mapping{
        container = "staphb/minimap2:2.24"
        cpus = params.t_mapping
    }
    withLabel: samtools{
        container = "staphb/samtools:1.15"
        cpus = params.t_mapping
    }
    withLabel: racon{
        container = "staphb/racon:1.4.20"
        cpus = params.t_polishing
    }
    withLabel: medaka{
        container = "ontresearch/medaka:v1.6.1"
        cpus = params.t_polishing
    }
    withLabel: prokka{
        container = "staphb/prokka:1.14.5"
        cpus = params.t_annotation
    }
    withLabel: busco{
        container = "ezlabgva/busco:v5.3.2_cv1"
        cpus = params.t_statistics
    }
    withLabel: report{
        container = "bikc/report:1.1"
    }
}


executor {
    name = 'local'
    queueSize = 5
    memory = '64 GB'
    cpus = 20
}


timeline {
  enabled = true
  file = "${params.out_dir}/timeline.html"
}
trace {
  enabled = true
  file = "${params.out_dir}/trace.txt"
}

report {
  enabled = true
  file = "${params.out_dir}/report.html"
}
